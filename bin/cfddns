#!/usr/bin/env php
<?php

$user_home = posix_getpwuid(posix_getuid())['dir'];
$autoload = $user_home.'/.composer/vendor/autoload.php';

if (file_exists(__DIR__.'/../vendor/autoload.php')) {
    $autoload = __DIR__.'/../vendor/autoload.php';
}

require $autoload;

// Initialize config
$config = new Flatline\CfDdns\Config\Config(
    "cfddns.yml",
    new Symfony\Component\Config\FileLocator([$user_home]),
    new Symfony\Component\Config\Loader\LoaderResolver
);
$config->load();

$app = new Flatline\CfDdns\Application(
    $config,
    new Flatline\CfDdns\CloudFlare\Api\Request
);
$app->run();
